<!-- App -->
<div class="container" style="background-color: white">
  <div class="container">
    <h1 class="light-blue-text text-lighten-2 center">{{vm.userName}}'s Grudges</h1>
    <div class="row">
      <div class="input-field col s11 center">
        <input id="new-task" type="text" ng-model="vm.text">
        <label for="new-task">New Task</label>
      </div>
      <a class="btn-floating btn-small waves-effect waves-light" ng-disabled="!vm.text.length" ng-click="vm.submit(vm.text, vm.payload.email)"><i class="material-icons">add</i></a>
    </div>
  </div>
  <h3 class="tk-pollen-web ldblue center">Grudges</h3>
  <div class="col">
    <!-- Add Main Goal New Page Button -->
  </div>
  <br>

  <!-- Current Goals -->
  <div ng-repeat="grudge in vm.grudges | filter:{}">
    <div class="collapsible-header" style="padding-right: 0px">
      <ul class="collection with-header">
        <li class="collection-item avatar" ui-sref="grudge({user: vm.userName, gid: grudge.id, grudge: grudge})">
          <div ng-if="!grudge.forgiven">
            <i class="material-icons circle red darken-4">thumb_down</i>
          </div>
          <div ng-if="grudge.forgiven">
            <i class="material-icons circle green darken-4">thumb_up</i>
          </div>
          <h4 class="title">{{grudge.offender}}</h4>
          <p class="center" for="{{grudge.id}}" style="display: initial;">{{grudge.offense}}<br>
          Known to be a jerk since {{vm.formatDate(grudge.madSince)}}
          </p>
          <!-- Delete Goal -->
          <a data-target="deleteGoalModal" class="secondary-content" style="color: black;" modal>
            <i tooltipped data-position="bottom" data-delay="100" data-tooltip="Delete Grudge" ng-click="vm.currentDeleteGoal = grudge" class="large material-icons right" data-target="deleteGoalModal" style="margin: 10px 15px 10px 0px;">delete_forever</i>
          </a>
          <!-- Delete Goal Modal -->
          <div id="deleteGoalModal" class="modal" style="width: 40%; height: 25%;">
            <div class="modal-content center">
              <span class="tk-pollen-web ldblue" style="font-size: 125%;">Are you sure you want to delete your grudge?</span>
              <br>
              <a class="waves-effect waves-light light-blue darken-4 btn modal-action modal-close tk-pollen-web" ng-click="vm.deleteGoal(vm.currentDeleteGoal.id)" style="color:white;">Yes</a>
              <a class="waves-effect waves-light light-blue darken-4 btn modal-action modal-close tk-pollen-web" style="color:white;">No</a>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div>
</tab-trap>